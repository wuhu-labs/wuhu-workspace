---
title: Missing tool call handling
status: open
---

Right now, the code is not super resilient to missing tool calls. For instance,
if during tool execution, wuhu crashes, then that session is no longer reusable,
since Anthropic and OpenAI will check and make sure that each tool call has a
corresponding tool result entry. When one is missing, repair with an error
message like "The result for this tool call has been lost. Retry if needed. The
tool call might or might not take place, for non-idempotent actions, consider
check current status first before continue"

Try to construct a pathological case and see if our system can repair
automatically. Definitely consider turn this into a unit test: create a chain
with missing tool results and see if we can add more messages.
