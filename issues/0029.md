---
title: "Taller text input with ⌘Enter to send in WuhuMVPApp"
status: done
priority: medium
---

## Context

The chat text input in `SessionDetailView` (and the identical one in
`ChannelDetailView`) is currently a single-line `TextField` that grows up to 5
lines. It feels cramped — users can't see enough of what they're typing before
it scrolls, and the default behavior sends on Enter, which makes it impossible
to type multi-line messages without a workaround.

## Requirements

### 1. Increase minimum visible height to 3 lines

The input should always be tall enough to display at least 3 lines of text, even
when the draft is empty. It may still grow beyond 3 lines (up to a reasonable
cap, e.g. 8–10 lines) but should never shrink below 3.

Currently:
```swift
.lineLimit(1 ... 5)
```

Change to something like:
```swift
.lineLimit(3 ... 10)
```

Or, if `lineLimit` alone doesn't produce a stable minimum, set an explicit
`.frame(minHeight:)` sized to ~3 lines of body text (~54–60 pt).

### 2. Change send to ⌘Enter; Enter inserts a newline

The current `.onSubmit { sendDraft() }` fires on bare Enter, preventing
multi-line input. Replace this with:

- **Enter** → inserts a newline (default `TextEditor` / multi-line
  `TextField` behavior).
- **⌘Enter (Command+Return)** → sends the message.

Implementation options (pick whichever is cleanest on macOS):

- Switch from `TextField(..., axis: .vertical)` to `TextEditor`, add an
  `.onKeyPress(.return, modifiers: .command)` handler (macOS 14+), or
- Keep the `TextField` but replace `.onSubmit` with a key-press handler that
  checks for the command modifier.

Remove or guard the existing `.onSubmit { sendDraft() }` so bare Enter no
longer sends.

### 3. Placeholder text

Show a placeholder that reads:

> **⌘Enter to send · Enter for newline**

(or similar wording that fits the field width). If using `TextEditor` (which
lacks a built-in placeholder), overlay the text when the draft is empty.

### 4. Apply to both input sites

The same pattern exists in two views:

- `SessionDetailView` in `SessionFeature.swift` (~line 781)
- `ChannelDetailView` in `ChannelFeature.swift` (~line 50)

Both should get the same treatment. Consider extracting a shared
`ChatInputField` view if it keeps things DRY.

## Files to Change

- `WuhuMVPApp/Sources/SessionFeature.swift` — `SessionDetailView`, the
  `HStack(alignment: .bottom)` input area and `sendDraft()`
- `WuhuMVPApp/Sources/ChannelFeature.swift` — `ChannelDetailView`, same
  pattern

## Acceptance Criteria

- [ ] Text input is at least 3 lines tall when empty
- [ ] Pressing Enter inserts a newline (does **not** send)
- [ ] Pressing ⌘Enter sends the message
- [ ] Placeholder text communicates the keybinding
- [ ] Both `SessionDetailView` and `ChannelDetailView` are updated
- [ ] Build passes: `xcodebuild build -project WuhuMVPApp/WuhuMVPApp.xcodeproj -scheme WuhuMVPApp -destination 'platform=macOS' -quiet`
