---
title: "Drop channel session types and related code"
status: open
assignee: agent
priority: medium
parent: "0045"
---

# WUHU-0050: Drop channel session types and related code

## Summary

Remove `WuhuSessionType.channel`, `.forkedChannel`, and all code that only
exists to support them. Channels will be redesigned later.

## Code to delete

### Types and enums
- `WuhuSessionType.channel` and `.forkedChannel` cases
- `WuhuDefaultSystemPrompts.channelAgent` and `.forkedChannelAgent`

### Session behavior
- `applyChannelRestrictions()` in `WuhuAgentTools.swift`
- Channel-specific branching in `agentToolset()`
- `displayStartEntryID` on `WuhuSession` (only used for forked channel
  history hiding)

### Child notification system
- `handleSessionIdle()` in `WuhuService` — the parent notification on child
  idle
- `setChildFinalMessageNotified` / `markChildFinalMessageRead` on the store
- `session_child_status` table

### Fork tool
- `forkCodingSession()` — the transcript-copying fork logic
- The `fork` tool itself (can be re-added when channels are redesigned)

## What stays

- `create_session` tool — still useful for orchestrator patterns
- `join_sessions` tool — still useful
- `session_steer` / `session_follow_up` — still useful for any multi-session
  pattern
- `list_child_sessions` / `read_session_final_message` — still useful
- `parentSessionID` on sessions — still needed for child tracking

## Database migration

- Drop `session_child_status` table
- Drop `displayStartEntryID` column from `sessions`
- Drop `sessionType` column from `sessions` (or migrate all rows to 'coding')

Handled in WUHU-0053.
