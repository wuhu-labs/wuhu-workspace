<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Issue #002 - Model/Provider Switcher for Sessions</title>
<link rel="stylesheet" href="../styles.css" />
</head>
<body>
<div class="site-shell">
<header class="site-header">
<a class="brand" href="../index.html">Wuhu <span>Issue Tracker</span></a>
<nav class="site-nav">
<a href="../index.html">Issues</a>
<a href="../index.html#dependency-map">Dependencies</a>
</nav>
</header>
<main class="page">
<nav class="crumbs"><a href="../index.html">All Issues</a></nav>
<header class="page-intro issue-intro">
<p class="kicker">Issue #002</p>
<h1>Model/Provider Switcher for Sessions</h1>
<p class="lede">Status <span class="pill pill-open">Open</span> with <span class="pill pill-high">High</span> priority.</p>
</header>
<article class="panel issue">
<div class="meta-grid">
<div><span class="label">Status</span><span class="pill pill-open">Open</span></div>
<div><span class="label">Priority</span><span class="pill pill-high">High</span></div>
<div><span class="label">Depends On</span><span>â€”</span></div>
<div><span class="label">Blocks</span><span><a href="001-llm-retry-backoff.html">#001</a></span></div>
</div>
<hr />
<section class="md-content">
<h2>Summary</h2>
<p>Add functionality to change a session&#39;s model and/or provider mid-conversation.</p>
<h2>Requirements</h2>
<ul>
<li>API endpoint to switch model on an existing session</li>
<li>Support changing both provider and model name</li>
<li>Session should continue with new model on next prompt</li>
</ul>
<h2>Context</h2>
<p>This is needed for manual testing of the retry logic (issue #001). The test flow requires:</p>
<ol>
<li>Create a session</li>
<li>Have one turn of conversation</li>
<li>Switch to a non-existent model (e.g., <code>gpt-404</code>)</li>
<li>Trigger a prompt</li>
<li>Observe retry behavior in logs</li>
</ol>
<h2>Implementation Notes</h2>
<ul>
<li>Likely a <code>PATCH /v2/sessions/:id</code> or dedicated endpoint</li>
<li>Update session record in SQLite</li>
<li>Next prompt uses the new model</li>
</ul>
<h2>Testing</h2>
<ul>
<li>Unit tests for model switching</li>
<li>Integration test: switch model, verify next prompt uses it</li>
</ul>
</section>
</article>
</main>
</div>
</body>
</html>