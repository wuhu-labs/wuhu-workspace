# Weekly Summary — 2026-W08

**Period:** Sunday, February 22 – Saturday, February 28, 2026 (UTC+8)
**Total commits:** 84 across 6 repositories

---

## Sunday, February 22

_No commits across any repository._

---

## Monday, February 23

A big architecture day focused on the monorepo (`wuhu`). Dynamic environments,
channel agents, workspace docs, and the first MVP app mockup all landed.

### wuhu (monorepo)

- **WUHU-0016:** Simplify skills prompt + metadata (#64)
- **Add product roadmap** (#65)
- **WUHU-0017:** Dynamic environments (#66) — environments can now be created
  and managed at runtime instead of being hardcoded.
- **CI:** Drop `-j 1` serialization (#67), use preinstalled swiftformat binary
  instead of SPM plugin (#68) — CI speed improvements.
- **WUHU-0019:** Channel agents (#69) — agents can now be scoped to channels.
- **WUHU-0020:** Workspace docs (#70) — introduce a workspace-level document
  store for shared knowledge.
- **MVP app mockup** (#71) — first SwiftUI mockup of the Wuhu desktop app.

---

## Tuesday, February 24

Massive push on the MVP app — wiring it up from mockup to a functional client
with real data, streaming, prompt caching, and core UX polish.

### wuhu (monorepo)

- **WUHU-0021:** Hook up MVP mockup to real data (#73)
- **MVPApp:** Session/channel creation, username, markdown, streaming (#74)
- **WUHU-0022:** Agent tools misalignment fixes (#75)
- **Update GRDB to 7.10.0** for all platforms (#76)
- **WUHU-0023:** MVPApp refresh timer (#77)
- **WUHU-0025:** Wire streaming deltas through subscription hub (#78)
- **MVPApp:** Session/channel creation and model switching (#79)
- **Update workspace path** in AGENTS.md, remove stale task.md (#80)
- **MVPApp:** Fix toolbar overflow by grouping sidebar items (#81)
- **WUHU-0026:** Add right-click rename for sessions (#82)
- **Fix:** Non-interactive bash tools and agent loop restart (#83)
- **WUHU-0027:** Wire streaming deltas to MVPApp UI (#84)
- **WUHU-0028:** Enable Anthropic prompt caching (#85)

---

## Wednesday, February 25

Quality-of-life and robustness improvements — larger context windows, smarter
defaults, better input UX, and a critical bug fix for hanging bash tools.

### wuhu (monorepo)

- **WUHU-0029:** Taller text input with ⌘Enter to send (#86)
- **WUHU-0030:** Surface steer vs follow-up mode + show both user queues in
  Session UI (#87)
- **WUHU-0032:** Raise Anthropic maxTokens default (#88)
- **Fix:** Bash tool hangs when Foundation Process misses exit notification
  (#89) — a reliability fix where Process.waitUntilExit could silently hang.
- **WUHU-0033:** Set default maxTokens to model's max output / 3 (#90)
- **WUHU-0034:** Add 1M context window support for Claude Opus/Sonnet 4.6
  (#91)
- **WUHU-0035:** Use file path to classify workspace docs vs issues (#92)

---

## Thursday, February 26

The great extraction — PiAI and the workspace engine were pulled out of the
monorepo into standalone packages. The app was renamed and gained iOS support.
Session management tools were exposed for coding sessions.

### wuhu (monorepo)

- **feat:** Expose session management tools to coding sessions (#93)
- **WUHU-0037:** Rename WuhuMVPApp to WuhuApp with iOS support (#94)
- **feat:** Add session archiving (WUHU-0040) (#95)
- **Replace embedded PiAI** with wuhu-ai package dependency (#96)
- **Move workspace/issues/workflow sections** to umbrella AGENTS.md (#97)

### wuhu-ai _(new repo)_

- **Initial commit:** Extract PiAI from wuhu-swift — the unified LLM client
  library now lives in its own repo.
- **Fix CI:** Use `swift:6.2-noble` container and `setup-xcode` action.

### wuhu-workspace-engine _(new repo)_

- **Initial scaffold:** Package.swift, three targets, CI, fixtures.
- **Implement WorkspaceContracts** types (#1) — the contract layer defining
  documents, queries, and results.

---

## Friday, February 27

The workspace engine was built out from contracts to a full implementation in a
single day. The app was extracted into its own repo with CI. The monorepo got
its final integration PRs before the new repos took over.

### wuhu (monorepo)

- **WuhuApp:** Enable sandbox for notarization + multi-workspace support (#98)
- **Replace WuhuWorkspaceDocsStore** with wuhu-workspace-engine (#99)

### wuhu-workspace-engine

- **Implement WorkspaceEngine:** SQLite-backed document index (#2)
- **Implement WorkspaceScanner:** Frontmatter parsing, file discovery,
  wuhu.yml config (#3)
- **Add filesystem watching:** FSEvents + inotify (#4) — live-reload when
  workspace files change.
- **Polish docs,** README, AGENTS.md, add example workspace and query
  cookbook (#5)
- **Async API,** path-based rules, known limitations docs (#6)

### wuhu-core _(new repo)_

- **Initial commit:** wuhu-core extracted from wuhu — the agent runtime,
  server, runner, and CLI now live here.

### wuhu-app _(new repo)_

- **Initial commit:** wuhu-app extracted from wuhu.
- **Add CI:** Build macOS and iOS targets.
- **CI fixes:** Skip macro plugin validation for TCA/CasePaths, add
  `-skipMacroValidation`, disable code signing for CI.

---

## Saturday, February 28

A high-output day across all repos. Multi-modal image support landed end-to-end
(from the LLM client through the core to the app). The documentation site was
created. DocC was deployed for all packages. The agent loop got smarter about
stopping and repetition detection.

### wuhu-ai

- **Add DocC deploy workflow** (#1)
- **Fix DocC flag:** `--output-path` → `--output-dir`
- **Add ImageContent type** and multi-modal support to providers (#2) — images
  can now be sent to Claude and OpenAI.
- **Parse usage from Anthropic SSE stream** (#3) — token usage is now extracted
  from streaming responses.

### wuhu-workspace-engine

- **Add DocC deploy workflow** (#7)
- **Fix DocC flag:** `--output-path` → `--output-dir`
- **Fix DocC workflow:** Create output parent directory.

### wuhu-core

- **Make agent loop stop cooperatively** instead of bailing on cancellation
  (#1) — graceful shutdown.
- **Add DocC deploy workflow** (#2)
- **Fix DocC flag/workflow** — multiple fixes for the deploy pipeline.
- **Add multi-modal image support:** Blob store, types, endpoints, read tool,
  hydration (#3) — full image pipeline from upload to agent consumption.
- **Add `--image` flag** to CLI prompt command (#4)
- **Remove usage gate on compaction check** (#5)
- **Add consecutive identical tool call detection** to agent loop (#6) —
  prevents agents from getting stuck in loops.

### wuhu-app

- **UI improvements:** Drop Home view, default to Opus 4.6, scroll-to-dismiss,
  scroll-to-bottom (#1)
- **Bump build number** to 2 for TestFlight, use build settings for version.
- **Fix TestFlight export:** Use API key auth instead of Xcode account.
- **Bump build number to 15** (continuing from existing TestFlight builds).
- **Add notarized macOS build script.**
- **Add stop button** to session detail toolbar (#2)
- **Hide child sessions** from the session list (#3)
- **Bump wuhu-core to 0.2.0,** handle richContent in pending queue preview.
- **Add image picker** and multi-modal support (#4) — users can attach images
  from the app.

### wuhu-site _(new repo)_

- **Initial Astro + Starlight scaffold** — the project site framework.
- **Initial site content** (#1)
- **Add CI deploy to R2,** worker source, deploy script (#2)
- **Add workspace-engine** to API reference links (#3)
- **Fix Worker:** DocC root redirect + SPA fallback routing (#4)
- **Worker:** Support multi-target DocC layouts (#5)

---

## Week Highlights

1. **Monorepo → multi-repo migration.** Four new repositories were created this
   week: `wuhu-ai`, `wuhu-workspace-engine`, `wuhu-core`, and `wuhu-app`. The
   original `wuhu` monorepo is now effectively archived, with all active
   development happening in the split repos.

2. **wuhu-workspace-engine built from scratch.** Went from zero to a full
   SQLite-backed workspace scanner with live filesystem watching, frontmatter
   parsing, and an async query API — all in two days (Thu–Fri).

3. **Multi-modal image support end-to-end.** Images can now flow from the app's
   photo picker, through the blob store, into the agent loop, and out to LLM
   providers — landed across `wuhu-ai`, `wuhu-core`, and `wuhu-app` on
   Saturday.

4. **MVP app became real.** The app went from a SwiftUI mockup on Monday to a
   functional client with streaming, session management, model switching, and
   TestFlight/notarized builds by Saturday.

5. **Documentation site launched.** `wuhu-site` was created with Astro +
   Starlight, deployed to R2 via Cloudflare Workers, with DocC API references
   for all packages.

6. **Agent loop hardening.** Cooperative cancellation, consecutive tool call
   repetition detection, and compaction improvements make the agent runtime
   more robust.
